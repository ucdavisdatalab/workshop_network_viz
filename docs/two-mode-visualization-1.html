<!DOCTYPE html>
<html lang="en-us" xml:lang="en-us">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Two-mode visualization | Network Visualization</title>
  <meta name="description" content="6 Two-mode visualization | Network Visualization" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Two-mode visualization | Network Visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_network_viz" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Two-mode visualization | Network Visualization" />
  
  
  

<meta name="author" content="Liza Wood" />


<meta name="date" content="2023-04-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="one-mode-visualization-1.html"/>
<link rel="next" href="additional-resources.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Network visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#description"><i class="fa fa-check"></i><b>0.1</b> Description</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i><b>0.2</b> Learning goals</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>0.3</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-are-network-data"><i class="fa fa-check"></i><b>1.1</b> What are network data?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#features-of-a-network"><i class="fa fa-check"></i><b>1.1.1</b> Features of a network</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#network-statistics"><i class="fa fa-check"></i><b>1.1.2</b> Network statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#storing-network-data"><i class="fa fa-check"></i><b>1.2</b> Storing network data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#delta-science-tracker"><i class="fa fa-check"></i><b>2.1</b> Delta Science Tracker</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#data-descriptions"><i class="fa fa-check"></i><b>2.2</b> Data descriptions</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#guiding-questions"><i class="fa fa-check"></i><b>2.3</b> Guiding questions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#one-mode-visualization"><i class="fa fa-check"></i><b>2.3.1</b> One-mode visualization:</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#two-mode-visualization"><i class="fa fa-check"></i><b>2.3.2</b> Two-mode visualization:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html"><i class="fa fa-check"></i><b>3</b> Creating network objects in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html#igraph"><i class="fa fa-check"></i><b>3.1</b> <code>igraph</code></a></li>
<li class="chapter" data-level="3.2" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html#network"><i class="fa fa-check"></i><b>3.2</b> <code>network</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting-packages.html"><a href="plotting-packages.html"><i class="fa fa-check"></i><b>4</b> Plotting packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-packages.html"><a href="plotting-packages.html#ggraph"><i class="fa fa-check"></i><b>4.1</b> <code>ggraph</code></a></li>
<li class="chapter" data-level="4.2" data-path="plotting-packages.html"><a href="plotting-packages.html#other-packages-and-functions"><i class="fa fa-check"></i><b>4.2</b> Other packages and functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="plotting-packages.html"><a href="plotting-packages.html#plot"><i class="fa fa-check"></i><b>4.2.1</b> <code>plot()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="plotting-packages.html"><a href="plotting-packages.html#ggallyggnet2"><i class="fa fa-check"></i><b>4.2.2</b> <code>GGally::ggnet2()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="plotting-packages.html"><a href="plotting-packages.html#ggnetworkggnetwork"><i class="fa fa-check"></i><b>4.2.3</b> <code>ggnetwork::ggnetwork()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html"><i class="fa fa-check"></i><b>5</b> One-mode visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#preparing-to-work-with-network"><i class="fa fa-check"></i><b>5.1.1</b> Preparing to work with <code>network</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#guiding-questions-1"><i class="fa fa-check"></i><b>5.2</b> Guiding questions:</a></li>
<li class="chapter" data-level="5.3" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#getting-started-with-ggraph"><i class="fa fa-check"></i><b>5.3</b> Getting started with <code>ggraph</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#layouts"><i class="fa fa-check"></i><b>5.3.1</b> Layouts</a></li>
<li class="chapter" data-level="5.3.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#aesthetics"><i class="fa fa-check"></i><b>5.3.2</b> Aesthetics</a></li>
<li class="chapter" data-level="5.3.3" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#node-labels"><i class="fa fa-check"></i><b>5.3.3</b> Node labels</a></li>
<li class="chapter" data-level="5.3.4" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#network-plotting-function"><i class="fa fa-check"></i><b>5.3.4</b> Network plotting function</a></li>
<li class="chapter" data-level="5.3.5" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#removing-isolates"><i class="fa fa-check"></i><b>5.3.5</b> Removing isolates</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#longitudinal-networks"><i class="fa fa-check"></i><b>5.4</b> Longitudinal networks</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#inducing-subgraphs-by-edge-attribute"><i class="fa fa-check"></i><b>5.4.1</b> Inducing subgraphs by edge attribute</a></li>
<li class="chapter" data-level="5.4.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#fixing-coordinates"><i class="fa fa-check"></i><b>5.4.2</b> Fixing coordinates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html"><i class="fa fa-check"></i><b>6</b> Two-mode visualization</a>
<ul>
<li class="chapter" data-level="6.1" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html#guiding-questions-2"><i class="fa fa-check"></i><b>6.1</b> Guiding questions:</a></li>
<li class="chapter" data-level="6.2" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html#representing-two-mode-networks"><i class="fa fa-check"></i><b>6.2</b> Representing two-mode networks</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html#the-one-mode-approach"><i class="fa fa-check"></i><b>6.2.1</b> The one-mode approach</a></li>
<li class="chapter" data-level="6.2.2" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html#normalized-degree-in-two-mode-networks"><i class="fa fa-check"></i><b>6.2.2</b> Normalized degree in two-mode networks</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html#climate-projects"><i class="fa fa-check"></i><b>6.3</b> Climate projects</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>7</b> Additional resources</a></li>
<li class="divider"></li>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />
</a>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Network Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="two-mode-visualization-1" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Two-mode visualization<a href="two-mode-visualization-1.html#two-mode-visualization-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="guiding-questions-2" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Guiding questions:<a href="two-mode-visualization-1.html#guiding-questions-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Next we’re going to shift to the two-mode network. That is, a network consisting of two distinctly different types of nodes, where ties are possible between (but not within) each node type. For our data, our two modes are research organizations and projects, where researchers are linked to projects based on their involvement, but in this case there is no link between projects or between researchers. With our two-mode network, we want to know:</p>
<ol style="list-style-type: decimal">
<li>Across the Delta science projects, which have the largest number of collaborators?<br />
</li>
<li>How do organizations’ activity differ across different scientific and management themes: climate, land use, governance, and flooding?</li>
</ol>
<p>We will be using approaches that are <em>similar</em> to one-mode networks, but there are some features that we will want to rethink given that there are differences given what we can calculate and what we want to communicate.</p>
</div>
<div id="representing-two-mode-networks" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Representing two-mode networks<a href="two-mode-visualization-1.html#representing-two-mode-networks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Analytical approaches for two-mode networks are slightly different from one-mode networks given that there are unique structural limitations of two-mode networks. As we’ve discussed already, in two-mode networks there cannot be connections between nodes of the same mode. Because of this, many structural statistics that you can calculate are not directly transferable. We’ll start with the one-mode visualization approach that we’ve started with, then build on these to improve our representation of the two-mode features.</p>
<div id="the-one-mode-approach" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> The one-mode approach<a href="two-mode-visualization-1.html#the-one-mode-approach" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>With one-mode networks, we used <code>sna::degree()</code> function to calculate the number of connections per node, and we can apply this same function to our two-mode network, <code>net2</code>, then run through the functions we’ve made so far to create a plot: <code>label_top_degree()</code> and <code>netplot_function()</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="two-mode-visualization-1.html#cb103-1" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;degree&#39;</span> <span class="ot">&lt;-</span> sna<span class="sc">::</span><span class="fu">degree</span>(net2)</span>
<span id="cb103-2"><a href="two-mode-visualization-1.html#cb103-2" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;labels&#39;</span> <span class="ot">&lt;-</span> <span class="fu">label_top_degree</span>(net2, <span class="dv">5</span>)</span>
<span id="cb103-3"><a href="two-mode-visualization-1.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">netplot_function</span>(net2)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>This is a fine start, but here we aren’t communicating anything about to two-modality of the data. Without any further specification, it just looks like a one-mode network with some central nodes. We could consider an important attribute in our data, mode, telling is which of those points are organizations (mode 1) and which are projects (mode 0).</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="two-mode-visualization-1.html#cb104-1" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span></span></code></pre></div>
<pre><code>##   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [75] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
## [112] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0
## [149] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [186] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [223] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [260] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [297] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [334] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [371] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [408] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</code></pre>
<p>To account for mode in our visualization, we could start by adding an aesthetic feature to our visualization, changing the shape and color to be determined by mode.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="two-mode-visualization-1.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">21</span>)</span>
<span id="cb106-2"><a href="two-mode-visualization-1.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(net2, <span class="at">layout =</span> <span class="st">&#39;fr&#39;</span>) <span class="sc">+</span></span>
<span id="cb106-3"><a href="two-mode-visualization-1.html#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>) <span class="sc">+</span></span>
<span id="cb106-4"><a href="two-mode-visualization-1.html#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> degree,</span>
<span id="cb106-5"><a href="two-mode-visualization-1.html#cb106-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> <span class="fu">factor</span>(mode),</span>
<span id="cb106-6"><a href="two-mode-visualization-1.html#cb106-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">factor</span>(mode))) <span class="sc">+</span></span>
<span id="cb106-7"><a href="two-mode-visualization-1.html#cb106-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb106-8"><a href="two-mode-visualization-1.html#cb106-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">11</span>)]) <span class="sc">+</span></span>
<span id="cb106-9"><a href="two-mode-visualization-1.html#cb106-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> labels),</span>
<span id="cb106-10"><a href="two-mode-visualization-1.html#cb106-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb106-11"><a href="two-mode-visualization-1.html#cb106-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb106-12"><a href="two-mode-visualization-1.html#cb106-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">size =</span> <span class="st">&quot;Degree&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Mode&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Mode&quot;</span>)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>So now we can see our modes, but there are a few things that are somewhat misrepresented when we use this approach:</p>
<ol style="list-style-type: decimal">
<li><p>Degree size is skewed by the limitations of the mode. Meaning: due to the nature of how two-mode networks are structured, it is likely that one mode will be more represented than the other. For instance in this case, organizations can participate in multiple projects across time, but projects are limited to the participants involved in the one time span on the project. Because of this, we see that organizations are all highest-degree, and don’t know much about the projects that are highly collaborative.</p></li>
<li><p>The layout of the network hides that within-mode connections are not possible. By using one of the more classical layout algorithms that try to limit distance and group similar nodes, it is hard to notice that no two yellow triangles are connected to one another, nor are there any connections between the purple circles.</p></li>
</ol>
<p>So let’s address each of these points.</p>
</div>
<div id="normalized-degree-in-two-mode-networks" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Normalized degree in two-mode networks<a href="two-mode-visualization-1.html#normalized-degree-in-two-mode-networks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One way to adjust and compare degree between modes is to calculate normalized degree <em>for each mode</em>. We can do this using the <code>bipartite</code> package:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="two-mode-visualization-1.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&#39;bipartite&#39;)</span></span>
<span id="cb107-2"><a href="two-mode-visualization-1.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bipartite)</span>
<span id="cb107-3"><a href="two-mode-visualization-1.html#cb107-3" aria-hidden="true" tabindex="-1"></a>?bipartite<span class="sc">::</span>ND</span></code></pre></div>
<p>This function, designed to think of bipartite (two-mode) data as species on different trophic levels, takes a matrix and uses that to calculate normalized degree for each mode.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="two-mode-visualization-1.html#cb108-1" aria-hidden="true" tabindex="-1"></a>degree_norm_bip <span class="ot">&lt;-</span> bipartite<span class="sc">::</span><span class="fu">ND</span>(<span class="fu">as.matrix</span>(net2), <span class="at">normalised =</span> T)</span></code></pre></div>
<p>The output has two measures of degree, one for rows (in this case called ‘lower’ because the package was designed to think about lower and higher trophic levels) and one for columns (‘higher’). Check which matches up.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="two-mode-visualization-1.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;lower&#39; is for for the rows, so in our case, organizations</span></span>
<span id="cb109-2"><a href="two-mode-visualization-1.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(degree_norm_bip<span class="sc">$</span>lower) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">unique</span>(edges_2mode<span class="sc">$</span>org_id))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="two-mode-visualization-1.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;higher&#39; is for for the columns, so in our case, projects</span></span>
<span id="cb111-2"><a href="two-mode-visualization-1.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(degree_norm_bip<span class="sc">$</span>higher) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">unique</span>(edges_2mode<span class="sc">$</span>project_id))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Now, we want to assign this bipartite degree in accordance with that order. BUT, note that this function orders degree based on numeric order of id, so we want to make sure this matches with the order of nodes in our network.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="two-mode-visualization-1.html#cb113-1" aria-hidden="true" tabindex="-1"></a>nd_output <span class="ot">&lt;-</span> <span class="fu">c</span>(degree_norm_bip<span class="sc">$</span>lower, degree_norm_bip<span class="sc">$</span>higher)</span>
<span id="cb113-2"><a href="two-mode-visualization-1.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span> <span class="sc">==</span> <span class="fu">as.numeric</span>(<span class="fu">names</span>(nd_output)))</span></code></pre></div>
<pre><code>## 
## TRUE 
##  435</code></pre>
<p>Looks good, so now let’s assign this new degree measure to our network. [NOTE: IS THIS DOING WHAT I EXPECT?]</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="two-mode-visualization-1.html#cb115-1" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span> <span class="ot">&lt;-</span> nd_output</span>
<span id="cb115-2"><a href="two-mode-visualization-1.html#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="two-mode-visualization-1.html#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: normalizing the degree for the whole network vs. normalizing degree for</span></span>
<span id="cb115-4"><a href="two-mode-visualization-1.html#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co"># each mode is a different process</span></span>
<span id="cb115-5"><a href="two-mode-visualization-1.html#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>((net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>])</span></code></pre></div>
<pre><code>##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 0.007246 0.007246 0.014493 0.016591 0.021739 0.086957</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="two-mode-visualization-1.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>((net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">1</span>])</span></code></pre></div>
<pre><code>##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 0.003367 0.003367 0.003367 0.016591 0.010101 0.232323</code></pre>
<p>Now, let’s assign labels but let’s pull out the labels for each mode specifically:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="two-mode-visualization-1.html#cb119-1" aria-hidden="true" tabindex="-1"></a>degs_mode0 <span class="ot">&lt;-</span> (net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb119-2"><a href="two-mode-visualization-1.html#cb119-2" aria-hidden="true" tabindex="-1"></a>degs_mode0 <span class="ot">&lt;-</span> degs_mode0[<span class="fu">order</span>(degs_mode0)]</span>
<span id="cb119-3"><a href="two-mode-visualization-1.html#cb119-3" aria-hidden="true" tabindex="-1"></a>topdegs_mode0 <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">rev</span>(degs_mode0))[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb119-4"><a href="two-mode-visualization-1.html#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="two-mode-visualization-1.html#cb119-5" aria-hidden="true" tabindex="-1"></a>degs_mode1 <span class="ot">&lt;-</span> (net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">1</span>]</span>
<span id="cb119-6"><a href="two-mode-visualization-1.html#cb119-6" aria-hidden="true" tabindex="-1"></a>degs_mode1 <span class="ot">&lt;-</span> degs_mode1[<span class="fu">order</span>(degs_mode1)]</span>
<span id="cb119-7"><a href="two-mode-visualization-1.html#cb119-7" aria-hidden="true" tabindex="-1"></a>topdegs_mode1 <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">rev</span>(degs_mode1))[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb119-8"><a href="two-mode-visualization-1.html#cb119-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-9"><a href="two-mode-visualization-1.html#cb119-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-10"><a href="two-mode-visualization-1.html#cb119-10" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span> <span class="ot">&lt;-</span> <span class="fu">ifelse</span>((net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>) <span class="sc">%in%</span> topdegs_mode0 <span class="sc">&amp;</span> </span>
<span id="cb119-11"><a href="two-mode-visualization-1.html#cb119-11" aria-hidden="true" tabindex="-1"></a>                                  net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>, net2 <span class="sc">%v%</span> <span class="st">&#39;name&#39;</span>, </span>
<span id="cb119-12"><a href="two-mode-visualization-1.html#cb119-12" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>((net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>) <span class="sc">%in%</span> topdegs_mode1 <span class="sc">&amp;</span> </span>
<span id="cb119-13"><a href="two-mode-visualization-1.html#cb119-13" aria-hidden="true" tabindex="-1"></a>                                  net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">1</span>, net2 <span class="sc">%v%</span> <span class="st">&#39;name&#39;</span>, <span class="st">&#39;&#39;</span>))</span></code></pre></div>
<p>Now we can size by our new node attribute, ‘degree_norm_bip’ and label the nodes by ‘labels_bip’.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="two-mode-visualization-1.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">21</span>)</span>
<span id="cb120-2"><a href="two-mode-visualization-1.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(net2, <span class="at">layout =</span> <span class="st">&#39;fr&#39;</span>) <span class="sc">+</span></span>
<span id="cb120-3"><a href="two-mode-visualization-1.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>) <span class="sc">+</span></span>
<span id="cb120-4"><a href="two-mode-visualization-1.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>,</span>
<span id="cb120-5"><a href="two-mode-visualization-1.html#cb120-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>),</span>
<span id="cb120-6"><a href="two-mode-visualization-1.html#cb120-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>))) <span class="sc">+</span></span>
<span id="cb120-7"><a href="two-mode-visualization-1.html#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb120-8"><a href="two-mode-visualization-1.html#cb120-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">11</span>)]) <span class="sc">+</span></span>
<span id="cb120-9"><a href="two-mode-visualization-1.html#cb120-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span>),</span>
<span id="cb120-10"><a href="two-mode-visualization-1.html#cb120-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb120-11"><a href="two-mode-visualization-1.html#cb120-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb120-12"><a href="two-mode-visualization-1.html#cb120-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">size =</span> <span class="st">&quot;Degree&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Mode&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Mode&quot;</span>)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-15-1.png" width="672" />
### Bipartite layout</p>
<p>Next, I want to reconsider layouts that help demonstrate the structural limitations between modes: that there can be no connections between projects or between collaborators. The ‘bipartite’ layout minimizes edge crossing and lines up modes next to one another. However, this layout requires a T/F ‘type’ variable to define the mode, so we can create that using our mode variable.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="two-mode-visualization-1.html#cb121-1" aria-hidden="true" tabindex="-1"></a>net2 <span class="sc">%v%</span> <span class="st">&#39;type&#39;</span> <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>, T, F)</span></code></pre></div>
<p>Now we can specify the layout to bipartite:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="two-mode-visualization-1.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(net2, <span class="at">layout =</span> <span class="st">&#39;bipartite&#39;</span>) <span class="sc">+</span></span>
<span id="cb122-2"><a href="two-mode-visualization-1.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>) <span class="sc">+</span></span>
<span id="cb122-3"><a href="two-mode-visualization-1.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>,</span>
<span id="cb122-4"><a href="two-mode-visualization-1.html#cb122-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>),</span>
<span id="cb122-5"><a href="two-mode-visualization-1.html#cb122-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>)),</span>
<span id="cb122-6"><a href="two-mode-visualization-1.html#cb122-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alpha =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb122-7"><a href="two-mode-visualization-1.html#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb122-8"><a href="two-mode-visualization-1.html#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">11</span>)]) <span class="sc">+</span></span>
<span id="cb122-9"><a href="two-mode-visualization-1.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span>),</span>
<span id="cb122-10"><a href="two-mode-visualization-1.html#cb122-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb122-11"><a href="two-mode-visualization-1.html#cb122-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb122-12"><a href="two-mode-visualization-1.html#cb122-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">size =</span> <span class="st">&quot;Degree&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Mode&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Mode&quot;</span>)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Add a guide: I only want one legend</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="two-mode-visualization-1.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(net2, <span class="at">layout =</span> <span class="st">&#39;bipartite&#39;</span>) <span class="sc">+</span></span>
<span id="cb123-2"><a href="two-mode-visualization-1.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>) <span class="sc">+</span></span>
<span id="cb123-3"><a href="two-mode-visualization-1.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>,</span>
<span id="cb123-4"><a href="two-mode-visualization-1.html#cb123-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>),</span>
<span id="cb123-5"><a href="two-mode-visualization-1.html#cb123-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">factor</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>)),</span>
<span id="cb123-6"><a href="two-mode-visualization-1.html#cb123-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alpha =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb123-7"><a href="two-mode-visualization-1.html#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb123-8"><a href="two-mode-visualization-1.html#cb123-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">11</span>)]) <span class="sc">+</span></span>
<span id="cb123-9"><a href="two-mode-visualization-1.html#cb123-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> net2 <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span>),</span>
<span id="cb123-10"><a href="two-mode-visualization-1.html#cb123-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb123-11"><a href="two-mode-visualization-1.html#cb123-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">repel =</span> T, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb123-12"><a href="two-mode-visualization-1.html#cb123-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Mode&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Mode&quot;</span>) <span class="sc">+</span> </span>
<span id="cb123-13"><a href="two-mode-visualization-1.html#cb123-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="st">&quot;legend&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;legend&quot;</span>, <span class="at">size =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<!----
## Leaders versus contributors?  
### Facet edges


```r
ggraph(net2, layout = 'fr') +
         geom_edge_link(color = "gray80") +
         geom_node_point(aes(size = degree), color = clrs[4],
                         alpha = .7) +
         theme_void() +
         theme(legend.position = "none") +
           labs(title = "Delta Science Collaborative Research Network") +
  facet_edges(~before_1980)
```
### Induce subgraphs by edge  

```r
# Induce subgraphs based on those edges
net2_l <- network::get.inducedSubgraph(net2, 
                                       eid = which(net2 %e% 'leadership' == T))
net2_c <- network::get.inducedSubgraph(net2, 
                                       eid = which(net2 %e% 'contribution' == T))
```


```r
assign_bipartite_deg_labels <- function(netname, n){
  degree_norm_bip <- bipartite::ND(as.matrix(netname))
  nd_output <- c(degree_norm_bip$higher, degree_norm_bip$lower)
  nd_output_df <- data.frame('degreeN' = nd_output,
                             'id' = names(nd_output))
  nd_output_sorted <- nd_output_df[match((netname %v% 'vertex.names'), 
                                          nd_output_df $id),]
  
  netname %v% 'degree_norm_bip' <- nd_output_sorted$degreeN
  
  topdeg_mode0 <- data.frame("deg" = 
              (netname %v% 'degree_norm_bip')[netname %v% 'mode' == 0]) %>%
    top_n(n)
  topdeg_mode1 <- data.frame("deg" = 
              (netname %v% 'degree_norm_bip')[netname %v% 'mode' ==   1]) %>% 
    top_n(n)

  netname %v% 'labels_org' <- ifelse((netname %v% 'degree_norm_bip') %in%
                                       topdeg_mode1$deg & 
                                       netname %v% 'mode' == 1, 
                                     netname %v% 'name', '')
  return(netname)
}
```

Now we have subgraphs

```r
net2_l
```

```
##  Network attributes:
##   vertices = 368 
##   directed = FALSE 
##   hyper = FALSE 
##   loops = FALSE 
##   multiple = FALSE 
##   bipartite = 71 
##   total edges= 297 
##     missing edges= 0 
##     non-missing edges= 297 
## 
##  Vertex attribute names: 
##     degree degree_norm_bip enddate funding_org funds labels labels_bip mgmt_Environmentalconditions mgmt_Floodriskandlandusemanagement mgmt_Governance mgmt_Habitatmanagement mgmt_Invasivenonnativespeciesmanagement mgmt_Nativespeciesmanagement mgmt_Waterquality mgmt_Watersupplymanagement mode n_years name sci_Amphibiansandreptiles sci_Aquaticvegetation sci_Biologicalresourceuse sci_Channelizedhabitats sci_Environmentalconditions sci_Fish sci_Floodplain sci_Foodwebs sci_Habitatchanges sci_Hydrologicchanges sci_Hydrologyandhydrodynamics sci_Invasivenonnativespecies sci_Invertebrates sci_Landuseandhumanactivities sci_Mammals sci_Nutrientsenergyandfoodweb sci_Riparianhabitats sci_Sediment sci_Species sci_Terrestrialhabitats sci_Tidalwetlands sci_Waterquality sci_Weatherandclimate startdate trunc_name type url vertex.names 
## 
##  Edge attribute names: 
##     contribution leadership
```
--->
</div>
</div>
<div id="climate-projects" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Climate projects<a href="two-mode-visualization-1.html#climate-projects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lets now turn to think more about nodes with the second guiding question: <em>How do organizations’ activity differ across different scientific and management themes: climate, land use, governance, and flooding? </em> Where we previously induced subgraphs based on edge attributes, we now want to compare subgraphs based on node attributes. We have scientific and management themes attributes to different projects, and we can identify the nodes for which those attributes are true.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="two-mode-visualization-1.html#cb124-1" aria-hidden="true" tabindex="-1"></a>climate <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;sci_Weatherandclimate&#39;</span> <span class="sc">==</span> T)</span>
<span id="cb124-2"><a href="two-mode-visualization-1.html#cb124-2" aria-hidden="true" tabindex="-1"></a>landuse <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;sci_Landuseandhumanactivities&#39;</span> <span class="sc">==</span> T)</span>
<span id="cb124-3"><a href="two-mode-visualization-1.html#cb124-3" aria-hidden="true" tabindex="-1"></a>govnc <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mgmt_Governance&#39;</span> <span class="sc">==</span> T)</span>
<span id="cb124-4"><a href="two-mode-visualization-1.html#cb124-4" aria-hidden="true" tabindex="-1"></a>flood <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;mgmt_Floodriskandlandusemanagement&#39;</span> <span class="sc">==</span> T)</span>
<span id="cb124-5"><a href="two-mode-visualization-1.html#cb124-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-6"><a href="two-mode-visualization-1.html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(climate)</span></code></pre></div>
<pre><code>## [1] 155 189 365 390 391 397</code></pre>
<p>However, we only have this attribute for nodes in the project mode, which means that the induced network will have zero edges – it is not possible for projects to have ties to one another, but if we create a network using nodes only with that attribute, we only can identify projects.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="two-mode-visualization-1.html#cb126-1" aria-hidden="true" tabindex="-1"></a>net2_cli <span class="ot">&lt;-</span> network<span class="sc">::</span><span class="fu">get.inducedSubgraph</span>(net2, </span>
<span id="cb126-2"><a href="two-mode-visualization-1.html#cb126-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">v =</span> climate)</span>
<span id="cb126-3"><a href="two-mode-visualization-1.html#cb126-3" aria-hidden="true" tabindex="-1"></a>net2_cli</span></code></pre></div>
<pre><code>##  Network attributes:
##   vertices = 9 
##   directed = FALSE 
##   hyper = FALSE 
##   loops = FALSE 
##   multiple = FALSE 
##   bipartite = 0 
##   total edges= 0 
##     missing edges= 0 
##     non-missing edges= 0 
## 
##  Vertex attribute names: 
##     degree degree_norm_bip enddate funding_org funds labels labels_bip mgmt_Environmentalconditions mgmt_Floodriskandlandusemanagement mgmt_Governance mgmt_Habitatmanagement mgmt_Invasivenonnativespeciesmanagement mgmt_Nativespeciesmanagement mgmt_Waterquality mgmt_Watersupplymanagement mode n_years name sci_Amphibiansandreptiles sci_Aquaticvegetation sci_Biologicalresourceuse sci_Channelizedhabitats sci_Environmentalconditions sci_Fish sci_Floodplain sci_Foodwebs sci_Habitatchanges sci_Hydrologicchanges sci_Hydrologyandhydrodynamics sci_Invasivenonnativespecies sci_Invertebrates sci_Landuseandhumanactivities sci_Mammals sci_Nutrientsenergyandfoodweb sci_Riparianhabitats sci_Sediment sci_Species sci_Terrestrialhabitats sci_Tidalwetlands sci_Waterquality sci_Weatherandclimate startdate trunc_name type url vertex.names 
## 
## No edge attributes</code></pre>
<p>So we also need to identify the organization alters related to the relevant projects.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="two-mode-visualization-1.html#cb128-1" aria-hidden="true" tabindex="-1"></a>climate_alter_ids <span class="ot">&lt;-</span> edges_2mode<span class="sc">$</span>org_id[edges_2mode<span class="sc">$</span>project_id <span class="sc">%in%</span> </span>
<span id="cb128-2"><a href="two-mode-visualization-1.html#cb128-2" aria-hidden="true" tabindex="-1"></a>                     (net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>)[climate]]</span>
<span id="cb128-3"><a href="two-mode-visualization-1.html#cb128-3" aria-hidden="true" tabindex="-1"></a>landuse_alter_ids <span class="ot">&lt;-</span> edges_2mode<span class="sc">$</span>org_id[edges_2mode<span class="sc">$</span>project_id <span class="sc">%in%</span> </span>
<span id="cb128-4"><a href="two-mode-visualization-1.html#cb128-4" aria-hidden="true" tabindex="-1"></a>                     (net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>)[landuse]]</span>
<span id="cb128-5"><a href="two-mode-visualization-1.html#cb128-5" aria-hidden="true" tabindex="-1"></a>govnc_alter_ids <span class="ot">&lt;-</span> edges_2mode<span class="sc">$</span>org_id[edges_2mode<span class="sc">$</span>project_id <span class="sc">%in%</span> </span>
<span id="cb128-6"><a href="two-mode-visualization-1.html#cb128-6" aria-hidden="true" tabindex="-1"></a>                     (net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>)[govnc]]</span>
<span id="cb128-7"><a href="two-mode-visualization-1.html#cb128-7" aria-hidden="true" tabindex="-1"></a>flood_alter_ids <span class="ot">&lt;-</span> edges_2mode<span class="sc">$</span>org_id[edges_2mode<span class="sc">$</span>project_id <span class="sc">%in%</span> </span>
<span id="cb128-8"><a href="two-mode-visualization-1.html#cb128-8" aria-hidden="true" tabindex="-1"></a>                     (net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>)[flood]]</span></code></pre></div>
<p>This approach gets us nearly there. We have their actual ids, but when we induce a network we want to use their numeric representation in the network object, so we have to further extract that.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="two-mode-visualization-1.html#cb129-1" aria-hidden="true" tabindex="-1"></a>climate_alters <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span> <span class="sc">%in%</span> climate_alter_ids)</span>
<span id="cb129-2"><a href="two-mode-visualization-1.html#cb129-2" aria-hidden="true" tabindex="-1"></a>landuse_alters <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span> <span class="sc">%in%</span> landuse_alter_ids)</span>
<span id="cb129-3"><a href="two-mode-visualization-1.html#cb129-3" aria-hidden="true" tabindex="-1"></a>govnc_alters <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span> <span class="sc">%in%</span> govnc_alter_ids)</span>
<span id="cb129-4"><a href="two-mode-visualization-1.html#cb129-4" aria-hidden="true" tabindex="-1"></a>flood_alters <span class="ot">&lt;-</span> <span class="fu">which</span>(net2 <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span> <span class="sc">%in%</span> flood_alter_ids)</span></code></pre></div>
<p>Now we have the ego’s location in the network, which we can set to our v argument, and their alter’s location in the network, which we can set to our alter argument.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="two-mode-visualization-1.html#cb130-1" aria-hidden="true" tabindex="-1"></a>net2_cli <span class="ot">&lt;-</span> network<span class="sc">::</span><span class="fu">get.inducedSubgraph</span>(net2, </span>
<span id="cb130-2"><a href="two-mode-visualization-1.html#cb130-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">v =</span> climate,</span>
<span id="cb130-3"><a href="two-mode-visualization-1.html#cb130-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">alters =</span> climate_alters)</span>
<span id="cb130-4"><a href="two-mode-visualization-1.html#cb130-4" aria-hidden="true" tabindex="-1"></a>net2_landuse <span class="ot">&lt;-</span> network<span class="sc">::</span><span class="fu">get.inducedSubgraph</span>(net2, </span>
<span id="cb130-5"><a href="two-mode-visualization-1.html#cb130-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">v =</span> landuse,</span>
<span id="cb130-6"><a href="two-mode-visualization-1.html#cb130-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">alters =</span> landuse_alters)</span>
<span id="cb130-7"><a href="two-mode-visualization-1.html#cb130-7" aria-hidden="true" tabindex="-1"></a>net2_govnc <span class="ot">&lt;-</span> network<span class="sc">::</span><span class="fu">get.inducedSubgraph</span>(net2, </span>
<span id="cb130-8"><a href="two-mode-visualization-1.html#cb130-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">v =</span> govnc,</span>
<span id="cb130-9"><a href="two-mode-visualization-1.html#cb130-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">alters =</span> govnc_alters)</span>
<span id="cb130-10"><a href="two-mode-visualization-1.html#cb130-10" aria-hidden="true" tabindex="-1"></a>net2_flood <span class="ot">&lt;-</span> network<span class="sc">::</span><span class="fu">get.inducedSubgraph</span>(net2, </span>
<span id="cb130-11"><a href="two-mode-visualization-1.html#cb130-11" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">v =</span> flood,</span>
<span id="cb130-12"><a href="two-mode-visualization-1.html#cb130-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">alters =</span> flood_alters)</span></code></pre></div>
<p>Next, let’s assign the appropriate high-degree labels to each of these. To make this a bit easier on ourselves, let’s create a function first, using the steps we learned above.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="two-mode-visualization-1.html#cb131-1" aria-hidden="true" tabindex="-1"></a>assign_bipartite_deg_labels <span class="ot">&lt;-</span> <span class="cf">function</span>(netname, n){</span>
<span id="cb131-2"><a href="two-mode-visualization-1.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  degree_norm_bip <span class="ot">&lt;-</span> bipartite<span class="sc">::</span><span class="fu">ND</span>(<span class="fu">as.matrix</span>(netname))</span>
<span id="cb131-3"><a href="two-mode-visualization-1.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  nd_output <span class="ot">&lt;-</span> <span class="fu">c</span>(degree_norm_bip<span class="sc">$</span>higher, degree_norm_bip<span class="sc">$</span>lower)</span>
<span id="cb131-4"><a href="two-mode-visualization-1.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  nd_output_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&#39;degreeN&#39;</span> <span class="ot">=</span> nd_output,</span>
<span id="cb131-5"><a href="two-mode-visualization-1.html#cb131-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;id&#39;</span> <span class="ot">=</span> <span class="fu">names</span>(nd_output))</span>
<span id="cb131-6"><a href="two-mode-visualization-1.html#cb131-6" aria-hidden="true" tabindex="-1"></a>  nd_output_sorted <span class="ot">&lt;-</span> nd_output_df[<span class="fu">match</span>((netname <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>), </span>
<span id="cb131-7"><a href="two-mode-visualization-1.html#cb131-7" aria-hidden="true" tabindex="-1"></a>                                          nd_output_df <span class="sc">$</span>id),]</span>
<span id="cb131-8"><a href="two-mode-visualization-1.html#cb131-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-9"><a href="two-mode-visualization-1.html#cb131-9" aria-hidden="true" tabindex="-1"></a>  netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span> <span class="ot">&lt;-</span> nd_output_sorted<span class="sc">$</span>degreeN</span>
<span id="cb131-10"><a href="two-mode-visualization-1.html#cb131-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-11"><a href="two-mode-visualization-1.html#cb131-11" aria-hidden="true" tabindex="-1"></a>  degs_mode0 <span class="ot">&lt;-</span> (netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb131-12"><a href="two-mode-visualization-1.html#cb131-12" aria-hidden="true" tabindex="-1"></a>  degs_mode0 <span class="ot">&lt;-</span> degs_mode0[<span class="fu">order</span>(degs_mode0)]</span>
<span id="cb131-13"><a href="two-mode-visualization-1.html#cb131-13" aria-hidden="true" tabindex="-1"></a>  topdegs_mode0 <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">rev</span>(degs_mode0))[<span class="dv">1</span><span class="sc">:</span>n]</span>
<span id="cb131-14"><a href="two-mode-visualization-1.html#cb131-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-15"><a href="two-mode-visualization-1.html#cb131-15" aria-hidden="true" tabindex="-1"></a>  degs_mode1 <span class="ot">&lt;-</span> (netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>)[netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">1</span>]</span>
<span id="cb131-16"><a href="two-mode-visualization-1.html#cb131-16" aria-hidden="true" tabindex="-1"></a>  degs_mode1 <span class="ot">&lt;-</span> degs_mode1[<span class="fu">order</span>(degs_mode1)]</span>
<span id="cb131-17"><a href="two-mode-visualization-1.html#cb131-17" aria-hidden="true" tabindex="-1"></a>  topdegs_mode1 <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">rev</span>(degs_mode1))[<span class="dv">1</span><span class="sc">:</span>n]</span>
<span id="cb131-18"><a href="two-mode-visualization-1.html#cb131-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-19"><a href="two-mode-visualization-1.html#cb131-19" aria-hidden="true" tabindex="-1"></a>  netname <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span> <span class="ot">&lt;-</span> <span class="fu">ifelse</span>((netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>) <span class="sc">%in%</span></span>
<span id="cb131-20"><a href="two-mode-visualization-1.html#cb131-20" aria-hidden="true" tabindex="-1"></a>                                       topdegs_mode0 <span class="sc">&amp;</span> </span>
<span id="cb131-21"><a href="two-mode-visualization-1.html#cb131-21" aria-hidden="true" tabindex="-1"></a>                                       netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">0</span>, </span>
<span id="cb131-22"><a href="two-mode-visualization-1.html#cb131-22" aria-hidden="true" tabindex="-1"></a>                                     netname <span class="sc">%v%</span> <span class="st">&#39;name&#39;</span>,</span>
<span id="cb131-23"><a href="two-mode-visualization-1.html#cb131-23" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>((netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>) <span class="sc">%in%</span> </span>
<span id="cb131-24"><a href="two-mode-visualization-1.html#cb131-24" aria-hidden="true" tabindex="-1"></a>                                       topdegs_mode1 <span class="sc">&amp;</span> </span>
<span id="cb131-25"><a href="two-mode-visualization-1.html#cb131-25" aria-hidden="true" tabindex="-1"></a>                                       netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span> <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb131-26"><a href="two-mode-visualization-1.html#cb131-26" aria-hidden="true" tabindex="-1"></a>                                     netname <span class="sc">%v%</span> <span class="st">&#39;name&#39;</span>, <span class="st">&#39;&#39;</span>))</span>
<span id="cb131-27"><a href="two-mode-visualization-1.html#cb131-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(netname)</span>
<span id="cb131-28"><a href="two-mode-visualization-1.html#cb131-28" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now we can apply this function to each of our subnetworks.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="two-mode-visualization-1.html#cb132-1" aria-hidden="true" tabindex="-1"></a>net2_cli <span class="ot">&lt;-</span> <span class="fu">assign_bipartite_deg_labels</span>(net2_cli, <span class="dv">2</span>)</span>
<span id="cb132-2"><a href="two-mode-visualization-1.html#cb132-2" aria-hidden="true" tabindex="-1"></a>net2_landuse <span class="ot">&lt;-</span> <span class="fu">assign_bipartite_deg_labels</span>(net2_landuse, <span class="dv">2</span>)</span>
<span id="cb132-3"><a href="two-mode-visualization-1.html#cb132-3" aria-hidden="true" tabindex="-1"></a>net2_govnc <span class="ot">&lt;-</span> <span class="fu">assign_bipartite_deg_labels</span>(net2_govnc, <span class="dv">2</span>)</span>
<span id="cb132-4"><a href="two-mode-visualization-1.html#cb132-4" aria-hidden="true" tabindex="-1"></a>net2_flood <span class="ot">&lt;-</span> <span class="fu">assign_bipartite_deg_labels</span>(net2_flood, <span class="dv">2</span>)</span></code></pre></div>
<p>Last, we want to plot them. Again however, it can streamline our process to use our previous code and turn it into a function to apply to all of our subnetworks.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="two-mode-visualization-1.html#cb133-1" aria-hidden="true" tabindex="-1"></a>plot_bipartite_fx <span class="ot">&lt;-</span> <span class="cf">function</span>(netname){</span>
<span id="cb133-2"><a href="two-mode-visualization-1.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(netname, <span class="at">layout =</span> <span class="st">&#39;bipartite&#39;</span>) <span class="sc">+</span></span>
<span id="cb133-3"><a href="two-mode-visualization-1.html#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>) <span class="sc">+</span></span>
<span id="cb133-4"><a href="two-mode-visualization-1.html#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> netname <span class="sc">%v%</span> <span class="st">&#39;degree_norm_bip&#39;</span>,</span>
<span id="cb133-5"><a href="two-mode-visualization-1.html#cb133-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> <span class="fu">factor</span>(netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>),</span>
<span id="cb133-6"><a href="two-mode-visualization-1.html#cb133-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="fu">factor</span>(netname <span class="sc">%v%</span> <span class="st">&#39;mode&#39;</span>)),</span>
<span id="cb133-7"><a href="two-mode-visualization-1.html#cb133-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alpha =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb133-8"><a href="two-mode-visualization-1.html#cb133-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb133-9"><a href="two-mode-visualization-1.html#cb133-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">11</span>)]) <span class="sc">+</span></span>
<span id="cb133-10"><a href="two-mode-visualization-1.html#cb133-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> netname <span class="sc">%v%</span> <span class="st">&#39;labels_bip&#39;</span>),</span>
<span id="cb133-11"><a href="two-mode-visualization-1.html#cb133-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb133-12"><a href="two-mode-visualization-1.html#cb133-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb133-13"><a href="two-mode-visualization-1.html#cb133-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Mode&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Mode&quot;</span>) <span class="sc">+</span> </span>
<span id="cb133-14"><a href="two-mode-visualization-1.html#cb133-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">colour =</span> <span class="st">&quot;legend&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;legend&quot;</span>, <span class="at">size =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb133-15"><a href="two-mode-visualization-1.html#cb133-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb133-16"><a href="two-mode-visualization-1.html#cb133-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="two-mode-visualization-1.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bipartite_fx</span>(net2_cli) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scientific theme: Climate&quot;</span>)</span>
<span id="cb134-2"><a href="two-mode-visualization-1.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bipartite_fx</span>(net2_landuse) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scientific theme: Land use&quot;</span>)</span>
<span id="cb134-3"><a href="two-mode-visualization-1.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bipartite_fx</span>(net2_govnc) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Management theme: Governance&quot;</span>)</span>
<span id="cb134-4"><a href="two-mode-visualization-1.html#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bipartite_fx</span>(net2_flood) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Management theme: Flooding&quot;</span>)</span></code></pre></div>
<p><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-31-1.png" width="50%" /><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-31-2.png" width="50%" /><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-31-3.png" width="50%" /><img src="06_twomode_visualization_files/figure-html/unnamed-chunk-31-4.png" width="50%" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="one-mode-visualization-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="additional-resources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_network_viz/edit/master/06_twomode_visualization.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_network_viz/blob/master/06_twomode_visualization.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
