<!DOCTYPE html>
<html lang="en-us" xml:lang="en-us">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data | Network Visualization</title>
  <meta name="description" content="2 Data | Network Visualization" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data | Network Visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_network_viz" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data | Network Visualization" />
  
  
  

<meta name="author" content="Liza Wood" />


<meta name="date" content="2023-03-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="creating-network-objects-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px"Network visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#description"><i class="fa fa-check"></i><b>0.1</b> Description</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i><b>0.2</b> Learning goals</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>0.3</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-are-network-data"><i class="fa fa-check"></i><b>1.1</b> What are network data?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#features-of-a-network"><i class="fa fa-check"></i><b>1.1.1</b> Features of a network</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#network-statistics"><i class="fa fa-check"></i><b>1.1.2</b> Network statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#storing-network-data"><i class="fa fa-check"></i><b>1.2</b> Storing network data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#delta-science-tracker"><i class="fa fa-check"></i><b>2.1</b> Delta Science Tracker</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#data-descriptions"><i class="fa fa-check"></i><b>2.2</b> Data descriptions</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#guiding-questions"><i class="fa fa-check"></i><b>2.3</b> Guiding questions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#one-mode-visualization"><i class="fa fa-check"></i><b>2.3.1</b> One-mode visualization:</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#two-mode-visualization"><i class="fa fa-check"></i><b>2.3.2</b> Two-mode visualization:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html"><i class="fa fa-check"></i><b>3</b> Creating network objects in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html#igraph"><i class="fa fa-check"></i><b>3.1</b> <code>igraph</code></a></li>
<li class="chapter" data-level="3.2" data-path="creating-network-objects-in-r.html"><a href="creating-network-objects-in-r.html#network"><i class="fa fa-check"></i><b>3.2</b> <code>network</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting-packages.html"><a href="plotting-packages.html"><i class="fa fa-check"></i><b>4</b> Plotting packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-packages.html"><a href="plotting-packages.html#ggraph"><i class="fa fa-check"></i><b>4.1</b> <code>ggraph</code></a></li>
<li class="chapter" data-level="4.2" data-path="plotting-packages.html"><a href="plotting-packages.html#other-packages-and-functions"><i class="fa fa-check"></i><b>4.2</b> Other packages and functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="plotting-packages.html"><a href="plotting-packages.html#plot"><i class="fa fa-check"></i><b>4.2.1</b> <code>plot()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="plotting-packages.html"><a href="plotting-packages.html#ggallyggnet2"><i class="fa fa-check"></i><b>4.2.2</b> <code>GGally::ggnet2()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="plotting-packages.html"><a href="plotting-packages.html#ggnetwork"><i class="fa fa-check"></i><b>4.2.3</b> <code>ggnetwork</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html"><i class="fa fa-check"></i><b>5</b> One-mode visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#visualization-goals"><i class="fa fa-check"></i><b>5.1.1</b> Visualization goals:</a></li>
<li class="chapter" data-level="5.1.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#preparing-to-work-with-network"><i class="fa fa-check"></i><b>5.1.2</b> Preparing to work with <code>network</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#getting-started-with-ggraph"><i class="fa fa-check"></i><b>5.2</b> Getting started with <code>ggraph</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#layouts"><i class="fa fa-check"></i><b>5.2.1</b> Layouts</a></li>
<li class="chapter" data-level="5.2.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#aesthetics"><i class="fa fa-check"></i><b>5.2.2</b> Aesthetics</a></li>
<li class="chapter" data-level="5.2.3" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#node-labels"><i class="fa fa-check"></i><b>5.2.3</b> Node labels</a></li>
<li class="chapter" data-level="5.2.4" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#removing-isolates"><i class="fa fa-check"></i><b>5.2.4</b> Removing isolates</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#community-detection"><i class="fa fa-check"></i><b>5.3</b> Community detection</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#community-is-broadly-defined"><i class="fa fa-check"></i><b>5.3.1</b> Community is broadly defined</a></li>
<li class="chapter" data-level="5.3.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#equivalence-clusters"><i class="fa fa-check"></i><b>5.3.2</b> Equivalence clusters</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#longitudinal-networks"><i class="fa fa-check"></i><b>5.4</b> Longitudinal networks</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#induce-subgraphs-by-edge"><i class="fa fa-check"></i><b>5.4.1</b> Induce subgraphs by edge</a></li>
<li class="chapter" data-level="5.4.2" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#fixing-coordinates"><i class="fa fa-check"></i><b>5.4.2</b> Fixing coordinates</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="one-mode-visualization-1.html"><a href="one-mode-visualization-1.html#interactive-plots-drafting"><i class="fa fa-check"></i><b>5.5</b> Interactive plots DRAFTING</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="two-mode-visualization-1.html"><a href="two-mode-visualization-1.html"><i class="fa fa-check"></i><b>6</b> Two-mode visualization</a></li>
<li class="chapter" data-level="7" data-path="normalized-degree-for-both-modes-see-ebba.html"><a href="normalized-degree-for-both-modes-see-ebba.html"><i class="fa fa-check"></i><b>7</b> Normalized degree for both modes… (see Ebba)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="normalized-degree-for-both-modes-see-ebba.html"><a href="normalized-degree-for-both-modes-see-ebba.html#leaders-versus-contributors"><i class="fa fa-check"></i><b>7.1</b> Leaders versus contributors?</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="normalized-degree-for-both-modes-see-ebba.html"><a href="normalized-degree-for-both-modes-see-ebba.html#induce-subgraphs-by-edge-1"><i class="fa fa-check"></i><b>7.1.1</b> Induce subgraphs by edge</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="normalized-degree-for-both-modes-see-ebba.html"><a href="normalized-degree-for-both-modes-see-ebba.html#climate-projects"><i class="fa fa-check"></i><b>7.2</b> Climate projects</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>8</b> Additional resources</a></li>
<li class="chapter" data-level="9" data-path="igraph-visualiation.html"><a href="igraph-visualiation.html"><i class="fa fa-check"></i><b>9</b> igraph visualiation</a></li>
<li class="chapter" data-level="10" data-path="ggnet2.html"><a href="ggnet2.html"><i class="fa fa-check"></i><b>10</b> ggnet2</a></li>
<li class="chapter" data-level="11" data-path="interactive.html"><a href="interactive.html"><i class="fa fa-check"></i><b>11</b> interactive</a></li>
<li class="divider"></li>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />
</a>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Network Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="delta-science-tracker" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Delta Science Tracker<a href="data.html#delta-science-tracker" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This workshop uses publicly available data from the Delta Stewardship Council’s (DSC) <a href="https://sciencetracker.deltacouncil.ca.gov/">Delta Science Tracker</a>. This database is a library of Sacramento and San Joaquin Delta-related research over the last 50 years. As the DSC’s website explains:</p>
<div class="line-block">“The Delta Science Tracker is a tool to improve coordination and collaboration of science<br />
activities in a way that is valuable to scientists, decision-makers, and managers in the<br />
Delta. The Delta Science Tracker allows users to explore and visualize recent research and<br />
monitoring efforts through the lenses of science activities, organizations, and people. It<br />
is intended to promote communication, create opportunities for collaboration, and enhance<br />
transparency for science funding opportunities and decisions.”</div>
<p>The data we’re using was downloaded from the DSC’s <a href="https://sciencetracker.deltacouncil.ca.gov/visualizations">visualizations page</a>, with the ‘collaborations by’ filter set to organizations. Additional data was downloaded through scraping their webpage, which we did with permission from the DSC. Code for scraping their webpage can be found <a href="https://github.com/ucdavisdatalab/workshop_network_viz/blob/main/scraping_data.R">here</a>.</p>
</div>
<div id="data-descriptions" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Data descriptions<a href="data.html#data-descriptions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before getting started with visualizations, we want to take a look at the data we have available. Typical questions you should be able to answer based on your network data are as follows: What types of nodes do we have and how are they related? Are there any node and/or edge attributes are available? Are the network data one or two mode? Directed or undirected? Let’s take a look at what we have.</p>
<p><strong>Two-mode edge list:</strong> The DSC data was originally compiled as two-mode network data, describing how organizations/researchers are connected to research projects. In these data, our first mode, <code>project_id</code>, is the id numbers representing different Delta science research projects. And our second mode, <code>org_id</code>, is the organization(s) (agencies, universities, etc) that are working on that project. This two-mode edge list has 680 rows, whereby 138 organizations are connected with one or more of 297 projects. In these data, organizations often take part in more than one project, and projects often have more than one organizations associated with it. We also have edge attributes, which represent the kind of involvement an organization has in the project: contributor or leader.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>edges_2mode <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/edgelist_twomode.csv&#39;</span>)</span>
<span id="cb34-2"><a href="data.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(edges_2mode)</span></code></pre></div>
<pre><code>##   org_id project_id contribution leadership
## 1  49590      50122         TRUE      FALSE
## 2  49592      49780         TRUE      FALSE
## 3  49592      49865         TRUE      FALSE
## 4  49594      49860         TRUE      FALSE
## 5  49598      50091         TRUE      FALSE
## 6  49600      50170         TRUE      FALSE</code></pre>
<p><strong>Two-mode node list</strong>: We have a two-mode list of all the nodes (organizations and projects). We have more node attributes for project nodes than we do for organization nodes, so many of the attributes for organizations are empty. For projects, we have funding data, the dates of the project, as well as a series of categorical tags related to what kinds of scientific and management themes the project addresses. A sample of those are displayed below:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data.html#cb36-1" aria-hidden="true" tabindex="-1"></a>nodes_2mode <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/nodelist_twomode.csv&#39;</span>)</span>
<span id="cb36-2"><a href="data.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodes_2mode[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">16</span>,<span class="dv">31</span>,<span class="dv">39</span>)])</span></code></pre></div>
<pre><code>##      id    funds startdate enddate sci_Floodplain mgmt_Waterquality mode
## 1 50122       $0      2008    2019          FALSE              TRUE    0
## 2 49780       $0      2020    2021          FALSE             FALSE    0
## 3 49865 $445,921      2019    2022          FALSE             FALSE    0
## 4 49860 $931,104      2019    2022          FALSE             FALSE    0
## 5 50091       $0        NA      NA          FALSE             FALSE    0
## 6 50170       $0        NA      NA          FALSE             FALSE    0</code></pre>
<p>Note that the scientific and management themes are formatted as Boolean values for each theme. This is because projects can have more than one theme, and so listing them out would cause our data to be ‘long’ with repeated project observations. With node lists, we want to only have unique observations. If your data are ‘long’ (with repeating observations), widen them out as we did with the scientific and management themes.</p>
<p><strong>One-mode edge list:</strong> We projected our two-mode network to a one-mode network to take a deeper look at research collaborations. Projection of two-mode data into one-mode is a common practice, though it has its limitations (Jasny 2012). By converting two-mode into one-mode data, we can take a look at what organizations are working together on projects. We’ve also added in an edge attribute to our collaboration tie based on the years that different actors collaborated together. See below for a hint on how to project one-mode data from two-mode data.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data.html#cb38-1" aria-hidden="true" tabindex="-1"></a>edges_1mode <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/edgelist_projected.csv&#39;</span>) </span>
<span id="cb38-2"><a href="data.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(edges_1mode)</span></code></pre></div>
<pre><code>##   from_org_id to_org_id Y1995_2009 Y2010_2024 before_1980 Y1980_1994
## 1       49590     49709       TRUE      FALSE       FALSE      FALSE
## 2       49592     49708      FALSE       TRUE       FALSE      FALSE
## 3       49592     49741      FALSE       TRUE       FALSE      FALSE
## 4       49592     49609      FALSE       TRUE       FALSE      FALSE
## 5       49708     49741      FALSE       TRUE       FALSE      FALSE
## 6       49609     49708      FALSE       TRUE       FALSE      FALSE</code></pre>
<details>
<summary>
<strong>Reveal:</strong> How to project one-mode networks from two-mode edge list
</summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We got our projected data directly from the DST webpage, but generally,</span></span>
<span id="cb40-2"><a href="data.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># you can project any bipartite network into a one-mode network using the</span></span>
<span id="cb40-3"><a href="data.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># following steps:</span></span>
<span id="cb40-4"><a href="data.html#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="data.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Create count table where organizations are columns (make your mode of</span></span>
<span id="cb40-6"><a href="data.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    interest the 2nd/y argument in the table)</span></span>
<span id="cb40-7"><a href="data.html#cb40-7" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">table</span>(edges_2mode[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)])</span>
<span id="cb40-8"><a href="data.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Extract column names -- these are mode 1 names (in our case, orgs)</span></span>
<span id="cb40-9"><a href="data.html#cb40-9" aria-hidden="true" tabindex="-1"></a>orgids <span class="ot">&lt;-</span> <span class="fu">colnames</span>(tbl)</span>
<span id="cb40-10"><a href="data.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Take the cross-product of the table to get a co-occurence matrix</span></span>
<span id="cb40-11"><a href="data.html#cb40-11" aria-hidden="true" tabindex="-1"></a>comat <span class="ot">&lt;-</span> <span class="fu">crossprod</span>(tbl)</span>
<span id="cb40-12"><a href="data.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Assign self-co-occurrences 0</span></span>
<span id="cb40-13"><a href="data.html#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(comat) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-14"><a href="data.html#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   Check: This should be symmetrical</span></span>
<span id="cb40-15"><a href="data.html#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="fu">isSymmetric</span>(comat)</span>
<span id="cb40-16"><a href="data.html#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Make a data frame from the matrix and add ids as the column names</span></span>
<span id="cb40-17"><a href="data.html#cb40-17" aria-hidden="true" tabindex="-1"></a>comat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(comat)</span>
<span id="cb40-18"><a href="data.html#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(comat) <span class="ot">&lt;-</span> orgids</span>
<span id="cb40-19"><a href="data.html#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="co">#.  Check: This should be square</span></span>
<span id="cb40-20"><a href="data.html#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(comat)</span>
<span id="cb40-21"><a href="data.html#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Remove those with no co-occurrence at all</span></span>
<span id="cb40-22"><a href="data.html#cb40-22" aria-hidden="true" tabindex="-1"></a>comat <span class="ot">&lt;-</span> comat[<span class="fu">rowSums</span>(comat, <span class="at">na.rm =</span> T) <span class="sc">!=</span> <span class="dv">0</span>, </span>
<span id="cb40-23"><a href="data.html#cb40-23" aria-hidden="true" tabindex="-1"></a>               <span class="fu">colSums</span>(comat, <span class="at">na.rm =</span> T) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb40-24"><a href="data.html#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Make co-occur data frame into matrix object</span></span>
<span id="cb40-25"><a href="data.html#cb40-25" aria-hidden="true" tabindex="-1"></a>comat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(comat)</span>
<span id="cb40-26"><a href="data.html#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. Create a graph so that it can be converted into a weighted edge list</span></span>
<span id="cb40-27"><a href="data.html#cb40-27" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_adjacency_matrix</span>(comat, <span class="at">weighted =</span> T, <span class="at">mode =</span> <span class="st">&#39;undirected&#39;</span>)</span>
<span id="cb40-28"><a href="data.html#cb40-28" aria-hidden="true" tabindex="-1"></a>el_proj <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">get.data.frame</span>(g)</span></code></pre></div>
</details>
<p><br></p>
<p><strong>One-mode node list</strong>: We reduced our two-mode node list down to only a list of our organization nodes, which is what we project in our one-mode network. For organizations, we have very few attributes, only their id, name, and link to their DST page.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data.html#cb41-1" aria-hidden="true" tabindex="-1"></a>nodes_1mode <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/nodelist_onemode.csv&#39;</span>)</span>
<span id="cb41-2"><a href="data.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodes_1mode[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code></pre></div>
<pre><code>##      id                                                name
## 1 49590 Agricultural Coalitions: Landowners membership fees
## 2 49592                                          Anchor QEA
## 3 49593                                Audubon Canyon Ranch
## 4 49594                              Bachand and Associates
## 5 49598                                                 BTS
## 6 49600                                             CalFish</code></pre>
</div>
<div id="guiding-questions" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Guiding questions<a href="data.html#guiding-questions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As with any visualization, we need to have an idea of what stories we want to tell / what questions we want to answer. With networks, there are limits to how much you can ‘explore’ through visualization alone, and so throughout these plotting exercises having guiding questions can keep you focused on what is important as we navigate the wide array of visualization options.</p>
<div id="one-mode-visualization" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> One-mode visualization:<a href="data.html#one-mode-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>What is the structure of the collaborative research network research in the Delta?</li>
<li>Do we see any particular research communities emerge across these collaborations? (community detection + representing node attributes by color)</li>
<li>How have those collaborations changed over time? (subgraphs based on edge attribute + multiple plots with fixed coordinates)</li>
</ul>
</div>
<div id="two-mode-visualization" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Two-mode visualization:<a href="data.html#two-mode-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Across the Delta science project, what organizations have been most active?<br />
</li>
<li>How do organizations’ activity differ across different scientific and management themes: climate, land use, governance, and flooding? (subgraphs based on edge attribute)<br />
</li>
<li>Are most-active members typically leaders or contributors? (make subgraphs based on edge attribute + make multiple plots with fixed coordinates)</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-network-objects-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_network_viz/edit/master/02_data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_network_viz/blob/master/02_data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
